import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { useState } from 'react'
import { action } from '@storybook/addon-actions'
import {
  Section,
  SectionContainer,
  SectionContentList,
  SectionContentListEmpty,
  SectionHeader,
  SectionListItemButton,
  SectionTitle,
} from '../section'
import { Variant, Select } from '../form'
import { SectionFilter } from './SectionFilter'

<Meta
  title="Components/Section/SectionFilter"
  component={SectionFilter}
  decorators={[
    (Story) => (
      <Section>
        <Story />
      </Section>
    ),
  ]}
/>

# SectionFilter

You can use the SectionFilter component to create a filter on a specific Section.
It supports two modes out off the box. The dialog mode shows the filter in a dialog, which is very convenient on mobile devices, whereas the default mode shows the filter in the section header.

This component is based on two libraries that you need to install in your project as well:

```
npm i @reach/dialog @aboutbits/react-toolbox
```

export const Template = () => {
  const [filter, setFilter] = useState({ role: '', department: '' })
  const content = Array.from(Array(10).keys())
    .map((item, index) => ({
      name: `User ${item + 1}`,
      role: index % 8 === 0 ? 'ADMIN' : 'USER',
      department: index % 3 === 0 ? 'HR' : 'SALES',
    }))
    .filter((item) => {
      return (
        (filter.role === '' || item.role === filter.role) &&
        (filter.department === '' || item.department === filter.department)
      )
    })
  return (
    <Section>
      <SectionHeader>
        <SectionTitle>Users</SectionTitle>
        <SectionFilter
          initialValues={filter}
          onFilter={(values) => {
            setFilter(values)
          }}
        >
          <Select id="role" name="role" variant={Variant.transparent}>
            <option className="bg-gray-600" value="">
              All roles
            </option>
            <option className="bg-gray-600" value="ADMIN">
              Admin
            </option>
            <option className="bg-gray-600" value="USER">
              User
            </option>
          </Select>
          <Select
            id="department"
            name="department"
            variant={Variant.transparent}
          >
            <option className="bg-gray-600" value="">
              All departments
            </option>
            <option className="bg-gray-600" value="HR">
              Human Resources
            </option>
            <option className="bg-gray-600" value="IT">
              Engineering
            </option>
            <option className="bg-gray-600" value="SALES">
              Sales
            </option>
          </Select>
        </SectionFilter>
      </SectionHeader>
      <SectionContainer>
        <SectionContentList>
          {content.map((item) => (
            <SectionListItemButton key={item.name} onClick={action('clicked')}>
              {`${item.name} (${item.role} - ${item.department})`}
            </SectionListItemButton>
          ))}
          {content.length === 0 && (
            <SectionContentListEmpty>
              No users found in database.
            </SectionContentListEmpty>
          )}
        </SectionContentList>
      </SectionContainer>
    </Section>
  )
}

<Canvas>
  <Story name="Default">{Template.bind({})}</Story>
</Canvas>

### Props

<ArgsTable story="Default" />

### Theme

- `section.filter.form.base`: styles for the form container
