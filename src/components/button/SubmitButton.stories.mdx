import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs'
import { action } from '@storybook/addon-actions'
import { useForm } from 'react-hook-form'
import { Form } from '../form/Form'
import { SubmitButton } from './SubmitButton'

<Meta
  title="Components/Button/SubmitButton"
  component={SubmitButton}
  decorators={[
    (Story) => {
      const form = useForm()
      return (
        <Form form={form} onSubmit={action('onSubmit')}>
          <Story />
        </Form>
      )
    },
  ]}
/>

export const Template = ({ children, ...args }) => (
  <SubmitButton {...args}>{children}</SubmitButton>
)

# SubmitButton

The **_default values_** for variant, size, and tone can be found in the [Button Section](/docs/components-button-button--default-story).

The submit button uses `React Hook Form` to automatically disable during submitting.

When the submit button is not placed inside a form (i.e. it has no form context), you can use the `formControl` prop to pass the control of the form.

## Usage

```jsx
const form = useForm({ defaultValues: { name: '', email: '' }})
<Form
  form={form}
  onSubmit={async (values) => {
    await new Promise((resolve) => setTimeout(resolve, 1000))
    alert(JSON.stringify(values, null, 2))
  }}
>
  <Input name="email" type="email" />
  <SubmitButton>Submit</SubmitButton>
</Form>
```

<Canvas>
  <Story
    name="Default"
    args={{ children: 'Submit' }}
    argTypes={{ onClick: { control: false } }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props:

<ArgsTable story="Default" />

All the other externally defined props are:

```
React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement> & ButtonProps
```

## Disabled

<Canvas>
  <Story name="Disabled" args={{ children: 'Submit', disabled: true }}>
    {Template.bind({})}
  </Story>
</Canvas>
