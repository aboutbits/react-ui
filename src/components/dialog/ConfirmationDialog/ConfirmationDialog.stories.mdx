import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { useReducer } from 'react'
import { Button } from '../../button/Button'
import { Tone } from '../../types'
import {
  ConfirmationDialog,
  ConfirmationDialogVariant,
} from './ConfirmationDialog'

<Meta
  title="Components/Dialog/ConfirmationDialog"
  component={ConfirmationDialog}
  argTypes={{
    onConfirm: { action: 'confirmed' },
    onDismiss: { action: 'dismissed' },
    buttonText: {
      table: {
        disable: true,
      },
    },
    buttonTone: {
      table: {
        disable: true,
      },
    },
  }}
/>

export const Template = ({ buttonText, buttonTone, ...args }) => {
  const [isOpen, toggleIsOpen] = useReducer((state) => !state, false)
  return (
    <>
      <Button tone={buttonTone} onClick={toggleIsOpen}>
        {buttonText}
      </Button>
      {isOpen && (
        <ConfirmationDialog
          {...args}
          onDismiss={toggleIsOpen}
          onConfirm={toggleIsOpen}
        />
      )}
    </>
  )
}

# ConfirmationDialog

This component is used to show a confirmation dialog on the page.

It leverages the [Dialog](/docs/components-dialog-dialog--default) component.

**Note:** The component does not include the button. The button is just used to activate the dialog changing the value of the prop `isOpen`.

<Canvas>
  <Story
    name="Default"
    args={{
      dismissButtonText: 'Cancel',
      confirmButtonText: 'Confirm',
      body: 'Are you sure you want to reset your notification settings to the standard settings?',
      title: 'Confirm reset notification settings',
      buttonText: 'Reset Notification',
      buttonTone: Tone.primary,
      'aria-label': 'Confirm reset notification settings',
      overlayClassName: 'z-10',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Usage

```jsx
const [isOpen, toggleIsOpen] = useReducer((state) => !state, false)

return (
  <>
    <Button onClick={toggleIsOpen}>Reset Notification</Button>

    {isOpen && (
      <ConfirmationDialog
        {...args}
        onDismiss={toggleIsOpen}
        onConfirm={toggleIsOpen}
      />
    )}
  </>
)
```

### Props:

<ArgsTable story="Default" />

### Theme:

- `dialog.confirmation.base`: Define the styles of the dialog window.
- `dialog.confirmation.title.base`: Define the text size of the title for the dialog window.
- `dialog.confirmation.title.variant.confirm`: Define the title color for the variant confirm.
- `dialog.confirmation.title.variant.critical`: Define the title color for the variant critical.

## Variant

The variant is used to change the color used as accent in the component. A use case would be a delete confirmation dialog that uses the `critical` variant:

<Canvas>
  <Story
    name="NonCriticalVariant"
    args={{
      dismissButtonText: 'Cancel',
      confirmButtonText: 'Confirm',
      body: 'Are you sure you want to send the document?',
      title: 'Confirm Save',
      buttonText: 'Non Critical Variant',
      buttonTone: Tone.primary,
      'aria-label': 'Confirm Save',
      overlayClassName: 'z-10',
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="CriticalVariant"
    args={{
      dismissButtonText: 'Cancel',
      confirmButtonText: 'Confirm',
      body: 'Are you sure you want to delete the user?',
      title: 'Delete User',
      variant: ConfirmationDialogVariant.critical,
      buttonText: 'Critical Variant',
      buttonTone: Tone.critical,
      'aria-label': 'Delete User',
      overlayClassName: 'z-10',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
