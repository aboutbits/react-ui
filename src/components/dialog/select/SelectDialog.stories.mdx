import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { useState } from 'react'
import { Button } from '../../button/Button'
import { Tone } from '../../types'
import { NavigationProvider } from '../../navigation/NavigationContext'
import { SelectDialog } from './SelectDialog'

<Meta title="Components/Dialog/SelectDialog" component={SelectDialog} />

# SelectDialog

This component is used to have a dynamic search and select within a dialog window.

It leverages the components [Dialog](/docs/components-dialog-dialog--default) and [DialogHeaderSearch](/docs/components-dialog-dialogheadersearch--default-story) which provides the search logic.

export const Template = ({
  buttonText,
  buttonTone,
  title,
  iconLabel,
  dialogLabel,
  ...args
}) => {
  const [toggle, setToggle] = useState(false)
  const [text, setText] = useState('')
  const clearSearch = () => setText('')
  const userList = ['User 1', 'User 2', 'User 3']
  return (
    <NavigationProvider>
      {toggle ? (
        <SelectDialog
          {...args}
          title={title}
          iconLabel={iconLabel}
          search={text}
          actions={{ search: setText, clear: clearSearch }}
          onDismiss={() => setToggle(!toggle)}
          dialogLabel={dialogLabel}
        >
          <ul>
            {userList
              .filter((user) => user.toLowerCase().includes(text.toLowerCase()))
              .map((user, index) => (
                <li className="py-4" key={index}>
                  {user}
                </li>
              ))}
          </ul>
        </SelectDialog>
      ) : (
        <Button tone={buttonTone} onClick={() => setToggle(!toggle)}>
          {buttonText}
        </Button>
      )}
    </NavigationProvider>
  )
}

<Canvas>
  <Story
    name="Default"
    args={{
      title: 'Select Dialog',
      iconLabel: 'Open search',
      buttonText: 'Reset Notification',
      buttonTone: Tone.primary,
      dialogLabel: 'Select dialog',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props:

<ArgsTable story="Default" />
