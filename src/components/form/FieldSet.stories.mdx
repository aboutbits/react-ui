import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { action } from '@storybook/addon-actions'
import { useCallback } from 'react'
import { useForm } from 'react-hook-form'
import { FieldSet } from './FieldSet'
import { Form } from './Form'
import {
  ToggleSwitch,
  ToggleSwitchLayout,
  ToggleSwitchHeight,
} from './ToggleSwitch'

<Meta
  title="Components/Form/FieldSet"
  component={FieldSet}
  decorators={[
    (Story) => {
      const form = useForm({
        defaultValues: { privacy: false, termsOfUse: false },
      })
      const onSubmit = useCallback((props) => {
        action('onSubmit')(props)
      }, [])
      return (
        <Form form={form} onSubmit={onSubmit}>
          <Story />
        </Form>
      )
    },
  ]}
/>

# FieldSet

This component can be used to group form components.

It requires to be inside a `React Hook Form` context, i.e [Form](/docs/components-form-form--default-story) component.

The `indent` property can be used to control the indentation of the component (which may depend on its position and the components it contains).

The `height` property can be used to adjust the component to the default input height to better integrate with a form that has input fields.

If field names are specified in the `fields` prop, the `FieldSet` label will display an error state depending on those form fields.

export const Template = ({ ...args }) => <FieldSet {...args} />

<Canvas>
  <Story
    name="Default"
    args={{
      label: 'Privacy',
      children: (
        <>
          <ToggleSwitch
            name="privacy"
            label="Accept Privacy"
            layout={ToggleSwitchLayout.spaceBetween}
            height={ToggleSwitchHeight.inputHeight}
          />
          <ToggleSwitch
            name="termsOfUse"
            label="Accept terms of use"
            layout={ToggleSwitchLayout.spaceBetween}
            height={ToggleSwitchHeight.inputHeight}
          />
        </>
      ),
    }}
    argTypes={{
      children: { control: false },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props

<ArgsTable story="Default" />
