import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { action } from '@storybook/addon-actions'
import { useForm } from 'react-hook-form'
import { Theme } from '../../../.storybook/components'
import { Mode } from '../types'
import { Form } from './Form'
import { FieldSet } from './FieldSet'
import {
  ToggleSwitch,
  ToggleSwitchSize,
  ToggleSwitchHeight,
  ToggleSwitchLayout,
} from './ToggleSwitch'

<Meta
  title="Components/Form/ToggleSwitch"
  component={ToggleSwitch}
  decorators={[
    (Story) => {
      const form = useForm({
        defaultValues: { active: false },
        mode: 'onTouched',
      })
      return (
        <Form form={form} onSubmit={action('onSubmit')}>
          <Story />
        </Form>
      )
    },
  ]}
/>

# ToggleSwitch

This component can be used to create toggle switches. This input already has a label and handles error messages in `React Hook Form` Forms.

export const Template = (args) => (
  <ToggleSwitch {...args} name="airplane-mode" />
)

<Canvas>
  <Story
    name="Default"
    args={{
      label: 'Airplane mode',
      layout: ToggleSwitchLayout.start,
      size: ToggleSwitchSize.md,
      height: ToggleSwitchHeight.compact,
      mode: Mode.light,
      disabled: false,
    }}
    argTypes={{
      layout: {
        options: Object.values(ToggleSwitchLayout),
        control: {
          type: 'radio',
        },
      },
      size: {
        options: Object.values(ToggleSwitchSize),
        control: {
          type: 'radio',
        },
      },
      height: {
        options: Object.values(ToggleSwitchHeight),
        control: {
          type: 'radio',
        },
      },
      mode: {
        options: Object.values(Mode),
        control: {
          type: 'radio',
        },
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props

<ArgsTable story="Default" />

### Theme

<Theme component="form" items={['toggleSwitch']} />

### With long text

export const TemplateWithLongText = () => (
  <ToggleSwitch
    name="toggle-w-long-text"
    label="This switch has a very long text to show the behavior of a line break within the ToggleSwitch component. Adjust the width of the window to see the positioning of the elements within the component."
  />
)

<Canvas>
  <Story name="With long text">{TemplateWithLongText.bind({})}</Story>
</Canvas>

### Inside form

You can use the [FieldSet](/docs/components-form-fieldset--default-story) and the `height={ToggleSwitchHeight.inputHeight}` prop to arrange the `ToggleSwitch` properly inside a form layout.

export const TemplateInsideForm = () => (
  <FieldSet label="Privacy">
    <ToggleSwitch
      name="toggle-inside-form"
      label="Accept the privacy policy"
      height={ToggleSwitchHeight.inputHeight}
      layout={ToggleSwitchLayout.spaceBetween}
    />
  </FieldSet>
)

<Canvas>
  <Story name="Inside form">{TemplateInsideForm.bind({})}</Story>
</Canvas>
