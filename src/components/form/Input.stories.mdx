import IconBadge from '@aboutbits/react-material-icons/dist/IconBadge'
import IconSearch from '@aboutbits/react-material-icons/dist/IconSearch'
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { action } from '@storybook/addon-actions'
import { Formik } from 'formik'
import * as Yup from 'yup'
import { Mode } from '../types'
import { Input } from './Input'
import { Form } from './Form'
import { Variant } from './types'

<Meta
  title="Components/Form/Input"
  component={Input}
  decorators={[
    (Story) => {
      const validationSchema = Yup.object().shape({
        name: Yup.string().required('Required'),
      })
      return (
        <Formik
          initialValues={{ name: '' }}
          validateOnChange={true}
          validationSchema={validationSchema}
          onSubmit={(values) => action('onSubmit')(values)}
        >
          <Form>
            <Story />
          </Form>
        </Formik>
      )
    },
  ]}
/>

# Input

This component can be used to create inputs. This input already has a label and handles error messages in `formik` Forms.

export const Template = ({ ...args }) => <Input {...args} name="name" />

<Canvas>
  <Story
    name="Default"
    args={{
      label: 'Name',
      placeholder: 'Your Name',
      type: 'text',
      mode: Mode.light,
      variant: Variant.ghost,
      disabled: false,
      iconStart: 'None',
      iconEnd: 'None',
    }}
    argTypes={{
      mode: {
        options: Object.values(Mode),
        control: {
          type: 'radio',
        },
      },
      variant: {
        options: Object.values(Variant),
        control: {
          type: 'radio',
        },
      },
      iconStart: {
        options: ['None', 'Search', 'Badge'],
        mapping: {
          None: undefined,
          Search: IconSearch,
          Badge: IconBadge,
        },
        control: { type: 'select' },
      },
      iconEnd: {
        options: ['None', 'Search', 'Badge'],
        mapping: {
          None: undefined,
          Search: IconSearch,
          Badge: IconBadge,
        },
        control: { type: 'select' },
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props

<ArgsTable story="Default" />

### Theme

- `form.input.base`: Defines base styles of the input, that will be applied in any state.
- `form.input.modeVariant.light[$variant].normal`: Defines the normal styles of the input in light mode, they will be replaced in error or disabled states
- `form.input.modeVariant.light[$variant].error`: Defines the error styles of the input in light mode.
- `form.input.modeVariant.light[$variant].disabled`: Defines the disabled styles of the input in light mode.
- `form.input.modeVariant.dark[$variant].normal`: Defines the normal styles of the input in dark mode, they will be replaced in error or disabled states
- `form.input.modeVariant.dark[$variant].error`: Defines the error styles of the input in dark mode.
- `form.input.modeVariant.dark[$variant].disabled`: Defines the disabled styles of the input in dark mode.
- `form.input.withIconStart`: Defines the style of the input with iconStart.
- `form.input.withIconEnd`: Defines the style of the input with iconEnd.
- `form.inputLabel.base`: Defines base styles of the input label, that will be applied in any state.
- `form.inputLabel.normal`: Defines the normal styles of the input label, they will be replaced in error or disabled states
- `form.inputLabel.error`: Defines the error styles of the input label.
- `form.inputLabel.disabled`: Defines the disabled styles of the input.
- `form.inputError.base`: Defines the style of the error message.
- `form.inputIcon.base`: Defines the style of the icon.
- `form.inputIcon.light.normal`: Defines the normal style of the icon in light mode.
- `form.inputIcon.light.disabled`: Defines the disabled style of the icon in light mode.
- `form.inputIcon.dark.normal`: Defines the normal style of the icon in dark mode.
- `form.inputIcon.dark.disabled`: Defines the disabled style of the icon in dark mode.
- `form.inputIcon.container.base`: Defines the base style of the icon container.
- `form.inputIcon.container.start`: Defines the style of the iconStart container.
- `form.inputIcon.container.end`: Defines the style of the iconEnd container.

## Variants

The `Variant` defines the background and the border.

<Canvas>
  <Story
    name="VariantGhost"
    args={{
      label: 'Ghost input',
      variant: Variant.ghost,
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="VariantSoft"
    args={{
      label: 'Soft input',
      variant: Variant.soft,
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="VariantTransparent"
    args={{
      label: 'Transparent input',
      variant: Variant.transparent,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## States

- In order to see the focus state please click into one of the elements.
- For the error state just leave the input empty.

<Canvas>
  <Story
    name="Placeholder"
    args={{
      label: 'Name (Placeholder)',
      value: '',
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="Filled"
    args={{
      label: 'Name (Filled)',
      value: 'John Doe',
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="Disabled"
    args={{
      label: 'Name (Disabled)',
      value: '',
      disabled: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Icon

<Canvas>
  <Story
    name="Icon"
    args={{
      label: 'Search',
      iconStart: IconSearch,
      placeholder: 'Search',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
