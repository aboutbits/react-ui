import { Meta, Story, Canvas } from '@storybook/addon-docs'
import { action } from '@storybook/addon-actions'
import { useState } from 'react'
import { Menu } from '../components/menu/Menu'
import { MenuItem } from '../components/menu/MenuItem'
import { i18n, locales } from './i18n'

<Meta title="Examples/Menu" />

# Menu

The following example provides a language picker using the menu components. It allows the user to switch among the provided languages.

export const Template = () => {
  // You can use `intl.locale.toUpperCase()` to get the current language in projects
  const [currentLanguage, setCurrentLanguage] = useState('EN')
  return (
    <Menu menuButtonContent={currentLanguage} menuLabel="">
      {i18n.supportedLanguages.map((supportedLanguage, index) => (
        <MenuItem
          onClick={() => {
            setCurrentLanguage(supportedLanguage)
            i18n.setLanguage(supportedLanguage)
            action('onClick')(supportedLanguage)
            // window.location.reload()
          }}
          key={index}
        >
          {locales[supportedLanguage]}
        </MenuItem>
      ))}
    </Menu>
  )
}

<Canvas>
  <Story name="Default">{Template.bind({})}</Story>
</Canvas>
