import IconSettings from '@aboutbits/react-material-icons/dist/IconSettings'
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { action } from '@storybook/addon-actions'
import { useState } from 'react'
import { Actions } from '../components/action'
import { Button, Variant as ButtonVariant } from '../components/button'
import {
  Section,
  SectionActions,
  SectionAction,
  SectionTitle,
  SectionContainer,
  SectionContentTitle,
  SectionContentList,
  SectionContentListEmpty,
  SectionHeader,
  SectionSearch,
  SectionListItemButton,
  SectionFooter,
} from '../components/section'
import { SectionFilter } from '../components/sectionFilter'
import { SectionFooterWithPaginationInMemory } from '../components/pagination'
import { Select, Variant as InputVariant } from '../components/form'

<Meta title="Examples/List" />

# List

The following example shows how multiple section components and the in memory pagination are used to create an overview list.

Changing the properties `numberOfTotalItems` and `numberOfItemsPerPage` will change the number of pages and/or the number the of items per page.

Setting `numberOfTotalItems` to 0 will reveal the placeholder for the empty list.

export const Template = ({ numberOfTotalItems, numberOfItemsPerPage }) => {
  const [page, setPage] = useState(1)
  const [filter, setFilter] = useState({ role: '', department: '', search: '' })
  const content = Array.from(Array(numberOfTotalItems).keys())
    .map((item, index) => ({
      name: `User ${item + 1}`,
      role: index % 8 === 0 ? 'ADMIN' : 'USER',
      department: index % 3 === 0 ? 'HR' : 'SALES',
    }))
    .filter(
      (item) =>
        item.name.includes(filter.search) &&
        (filter.role === '' || item.role === filter.role) &&
        (filter.department === '' || item.department === filter.department)
    )
  return (
    <Section>
      <SectionHeader>
        <SectionTitle>List of users</SectionTitle>
        <SectionFilter
          initialValues={filter}
          onFilter={(values) => setFilter(values)}
        >
          <Select id="role" name="role" variant={InputVariant.transparent}>
            <option className="bg-gray-600" value="">
              All roles
            </option>
            <option className="bg-gray-600" value="ADMIN">
              Admin
            </option>
            <option className="bg-gray-600" value="USER">
              User
            </option>
          </Select>
          <Select
            id="department"
            name="department"
            variant={InputVariant.transparent}
          >
            <option className="bg-gray-600" value="">
              All departments
            </option>
            <option className="bg-gray-600" value="HR">
              Human Resources
            </option>
            <option className="bg-gray-600" value="IT">
              Engineering
            </option>
            <option className="bg-gray-600" value="SALES">
              Sales
            </option>
          </Select>
          <SectionSearch />
        </SectionFilter>
        <SectionActions>
          <SectionAction label="Settings" icon={IconSettings} />
          <SectionAction label="Settings" icon={IconSettings} />
        </SectionActions>
      </SectionHeader>
      <SectionContainer>
        <SectionContentList>
          {content.length > 0 &&
            content
              .slice(
                (page - 1) * numberOfItemsPerPage,
                (page - 1) * numberOfItemsPerPage + numberOfItemsPerPage
              )
              .map((item) => (
                <SectionListItemButton
                  key={item.name}
                  onClick={() => action('clicked')}
                >
                  {`${item.name} (${item.role} - ${item.department})`}
                </SectionListItemButton>
              ))}
          {content.length === 0 && (
            <SectionContentListEmpty>
              No users found in database.
            </SectionContentListEmpty>
          )}
        </SectionContentList>
        <SectionFooterWithPaginationInMemory
          page={page}
          size={numberOfItemsPerPage}
          total={content.length}
          onChangePage={setPage}
        />
      </SectionContainer>
    </Section>
  )
}

<Canvas>
  <Story
    name="Default"
    args={{
      numberOfTotalItems: 1000,
      numberOfItemsPerPage: 5,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props

<ArgsTable story="Default" />

# List with content title

export const TemplateWithContentTitle = () => {
  const content = Array.from(Array(3).keys()).map((item, index) => ({
    name: `User ${item + 1}`,
    role: index % 8 === 0 ? 'ADMIN' : 'USER',
    department: index % 3 === 0 ? 'HR' : 'SALES',
  }))
  const list = (
    <SectionContentList>
      {content.length > 0 &&
        content.map((item) => (
          <SectionListItemButton
            key={item.name}
            onClick={() => action('clicked')}
          >
            {`${item.name} (${item.role} - ${item.department})`}
          </SectionListItemButton>
        ))}
    </SectionContentList>
  )
  return (
    <Section>
      <SectionHeader>
        <SectionTitle>List of users</SectionTitle>
      </SectionHeader>
      <SectionContainer>
        {list}
        <SectionContentTitle>Section Content Title</SectionContentTitle>
        {list}
        <SectionFooter>
          <Actions>
            <Button>Submit</Button>
            <Button variant={ButtonVariant.ghost} className="lg:order-first">
              Cancel
            </Button>
          </Actions>
        </SectionFooter>
      </SectionContainer>
    </Section>
  )
}

<Canvas>
  <Story
    name="ContentTitle"
    args={{
      numberOfTotalItems: 1000,
      numberOfItemsPerPage: 5,
    }}
  >
    {TemplateWithContentTitle.bind({})}
  </Story>
</Canvas>

# Simple List

export const TemplateSimpleList = () => {
  const content = Array.from(Array(5).keys()).map((item, index) => ({
    name: `User ${item + 1}`,
    role: index % 8 === 0 ? 'ADMIN' : 'USER',
    department: index % 3 === 0 ? 'HR' : 'SALES',
  }))
  return (
    <Section>
      <SectionHeader>
        <SectionTitle>List of users</SectionTitle>
      </SectionHeader>
      <SectionContainer>
        <SectionContentList>
          {content.length > 0 &&
            content.map((item) => (
              <SectionListItemButton
                key={item.name}
                onClick={() => action('clicked')}
              >
                {`${item.name} (${item.role} - ${item.department})`}
              </SectionListItemButton>
            ))}
          {content.length === 0 && (
            <SectionContentListEmpty>
              No users found in database.
            </SectionContentListEmpty>
          )}
        </SectionContentList>
      </SectionContainer>
    </Section>
  )
}

<Canvas>
  <Story name="SimpleList">{TemplateSimpleList.bind({})}</Story>
</Canvas>
